-- Create Database
CREATE DATABASE IF NOT EXISTS minions;

USE minions;

-- 1.Create Tables
CREATE TABLE IF NOT EXISTS minions (
    id INT AUTO_INCREMENT NOT NULL,
    name VARCHAR(50),
    age INT,
    PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS towns (
    town_id INT PRIMARY KEY AUTO_INCREMENT NOT NULL,
    name VARCHAR(50)
);

-- 2.Alter Minions Table
ALTER TABLE towns
RENAME column town_id to id;

ALTER TABLE minions
ADD COLUMN town_id INT,
ADD FOREIGN KEY (town_id) REFERENCES towns(id);

-- ALTER TABLE minions
-- ADD FOREIGN KEY (town_id) REFERENCES towns(id);

-- 3.Insert Records in Both Tables
INSERT INTO towns(name)
VALUES
	("Sofia"),
	("Plovdiv"),
	("Varna");
    
INSERT INTO minions(name, age, town_id)
VALUES
	("Kevin", 22, 1),
    ("Bob", 15, 3),
    ("Steward", NULL, 2);
    
-- 4.Truncate Table Minions
TRUNCATE minions;

-- 5.Drop All Tables
DROP TABLES minions, towns;
